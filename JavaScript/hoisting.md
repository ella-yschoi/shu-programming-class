# 📒 Hoisting

hoist의 사전적 의미는 '끌어 올리기' 라는 뜻입니다. 변수나 함수의 선언 코드가 호출 코드보다 아랫쪽에 있음에도 불구하고 에러가 발생하지 않고, 마치 선언 코드가 끌어올려져 호출 코드보다 더 위에 선언된 것과 같이 동작하는 특성을 hoisting(호이스팅) 이라고 합니다.

<br/>

## 0. 목차

<!-- no toc -->
1. [var, let, const](#1-var-let-const)
2. [함수 호이스팅과 변수 호이스팅](#2-함수-호이스팅과-변수-호이스팅)
3. [TDZ](#3-tdz)
4. [참고 자료](#4-참고-자료)

<br/>

## 1. var, let, const

var는 세 가지 문제를 가지고 있었습니다. (1) 값을 선언도 하기 전에 할당을 할 수 있고, (2) 전역변수와 지역변수의 개념이 확실하지 않으며, (3) 같은 이름의 변수가 두 개 이상이 될 수 있습니다. 이로 인해 let이나 const를 사용하게 되었는데, 사실 let과 const도 호이스팅이 일어나기는 일어납니다. 다만 차이점이 있습니다.

let과 const에서도 호이스팅이 되어 참조를 할 수 있게 되나, 이때는 선언만 되고 초기화가 되지 않아서 에러가 납니다. 즉, 선언한 변수가 호이스팅이 일어나긴 했지만, let과 cost는 선언과 초기화가 **동시에 일어나지 않았기 때문에** 에러가 발생한 것입니다.

정리하자면, var는 선언과 초기화가 동시에 일어나고 이후에 할당되며, let과 const는 선언과 초기화 사이에 TDZ가 막고 있고, 할당이 모두 동시에 일어나지 않기에 고맙게도 에러가 나야 하는 때에 에러가 잘 날 수 있습니다.

- var: 선언 및 초기화 → 할당
- let, const: 선언 → TDZ → 초기화 → 할당

<br/>

## 2. 함수 호이스팅과 변수 호이스팅

함수 호이스팅과 변수 호이스팅의 주요 차이는 호이스팅되는 내용과 스코프에 있습니다. 함수 호이스팅은 **전체 함수**를 스코프의 최상단으로 옮기지만, 변수 호이스팅은 **선언만**을 최상단으로 옮깁니다. 또한 `let`과 `const`는 변수 호이스팅에서 특별한 행동을 보여, 초기화 전에 접근할 수 없는 특징을 가집니다.

### (1) 함수 호이스팅 (Function Hoisting)

함수 선언을 코드의 맨 위로 끌어올리는 것처럼 동작하여, **함수를 선언하기 전에도 호출**할 수 있게 합니다. 이때, **함수 전체**가 호이스팅 됩니다. 이는 함수의 선언 전에도 해당 함수를 호출할 수 있다는 것을 의미합니다.

더불어, 함수 호이스팅은 함수가 선언된 스코프의 최상단으로 이동합니다. 함수 선언은 블록 스코프가 아닌 함수 스코프 또는 전역 스코프에 적용됩니다. 그리고 아래와 같이 함수 선언식에만 적용되며, 함수 표현식에는 적용되지 않습니다.

```javascript
// 함수 선언식
hello();

function hello() {
  console.log("Hello, world!"); // Hello, world!
}
```

```javascript
// 함수 표현식
hello();

let hello = function() {
  console.log( "Hello" ); // ReferenceError
};
```

### (2) 변수 호이스팅 (Variable Hoisting)

변수 호이스팅이란, 변수의 선언 위치와 상관 없이 코드 내 어느 곳에서든 호출이 가능하지만, 초기화는 `undefined` 입니다.

`var`로 선언된 변수의 경우, 선언은 코드의 맨 위로 호이스팅되지만 초기화는 호이스팅되지 않습니다. 따라서 선언 전에 변수에 접근하면 `undefined` 값을 얻게 됩니다.

```javascript
console.log(x); // undefined
var x = 5;
console.log(x); // 5

console.log(y); // ReferenceError: y is not defined
let y = 10;
```

반면, `let`과 `const`로 선언된 변수도 호이스팅되지만, 초기화 전에 접근하려고 하면 ReferenceError가 발생합니다. 이들은 '임시적 사각지대(Temporal Dead Zone)'에 빠지기 때문입니다.

또한, `var`로 선언된 변수는 함수 스코프 또는 전역 스코프에 호이스팅됩니다. 반면, `let`과 `const`는 블록 스코프에 호이스팅됩니다.

<br/>

## 3. TDZ

<br/>

## 4. 참고 자료

- [MDN - 호이스팅](https://developer.mozilla.org/ko/docs/Glossary/Hoisting)
- [JavaScript의 hoisting (호이스팅) 이란? - let과 var의 차이, let과 const 호이스팅](https://dev-ellachoi.tistory.com/1)
