# 📒 NPM과 Yarn의 차이

Node.js 환경에서는 NPM 뿐만 아니라 Yarn이라는 다른 패키지 매니저도 사용할 수 있습니다. NPM과 Yarn은 둘 다 JavaScript 개발자들이 외부 라이브러리나 프레임워크를 쉽게 설치하고 관리할 수 있도록 도와주는 패키지 관리 툴 입니다. 각각의 특징은 다음과 같습니다.

> Reference: [NPM과 Yarn](https://velog.io/@kysung95/%EA%B0%9C%EB%B0%9C%EC%83%81%EC%8B%9D-npm%EA%B3%BC-yarn)

<br/>

## 0. 목차

1. [NPM](#1-npm-node-package-manager)
2. [Yarn](#2-yarn)
3. [결론](#3-결론)

<br/>

## 1. NPM (Node Package Manager)

### (1) 특징

NPM은 가장 널리 사용되는 JavaScript 패키지 매니저이며, NPM 레지스트리라는 거대한 패키지 저장소를 사용합니다.

### (2) 장점

#### a. 사용자 수와 접근성

후발주자인 Yarn의 장점이 널리 알려져 있었던 때와 현재도 가장 많은 사용자를 보유하고 있으며 우수한 접근성을 지니고 있습니다.

#### b. Node.js와 함께 설치

Node.js를 설치하면 자동으로 NPM도 설치됩니다.

### (3) 단점

#### a. 의존성 실행

패키지 설치 시 의존성 패키지의 설치 스크립트도 실행됩니다. 이 스크립트는 패키지의 기능성을 위해 필요한 경우도 있지만, 악의적인 코드가 포함되어 있을 가능성도 있습니다.

#### b. 보안 위험

NPM 레지스트리에 등록된 패키지들은 일정 수준의 검증을 거치지만, 그 과정에서 모든 보안 위험을 완전히 배제하기는 어렵습니다. 따라서, 미검증된 패키지를 설치할 때는 코드를 실행하는 것이 보안 위험을 증가시킬 수 있습니다.

<br/>

## 2. Yarn

### (1) 특징

Yarn은 Facebook에서 만든 JavaScript 패키지 매니저입니다. NPM과 같은 기능을 수행하지만 상대적으로 더 가볍습니다. Yarn은 기본적으로 NPM의 단점(속도, 안정성, 보안 이슈)을 보완하고자 만들어진 매니저 툴입니다.

### (2) 장점

#### a. 빠른 속도

Yarn은 다운받은 패키지 데이터를 캐시(cache)에 저장하여 중복된 데이터는 다운로드 하지않고, 캐시에 저장된 파일을 활용함으로써 NPM에 비해 패키지 설치 속도가 매우 빠릅니다. 또한 여러 개의 패키지를 설치할 때 **병렬로 처리**하기 때문에 퍼포먼스와 속도가 증가 됩니다. (NPM은 각각의 패키지들을 순차적으로 설치)

#### b. 설치 과정에서의 일관성 및 안정성

NPM은 패키지가 설치될 때 자동으로 코드와 의존성을 실행할 수 있도록 허용했습니다. 이 특징은 편리한 기능이지만 안정성을 위협할 수 있는 반면 Yarn은 yarn.lock이나 package.json으로 부터 설치만 하며, yarn.lock은 모든 디바이스에 같은 패키지를 설치하는 것을 보장하기 때문에 버전의 차이로 인해 생기는 버그를 방지해줄 수 있습니다.

#### c. NPM 레지스트리와 호환

Yarn도 NPM 레지스트리를 사용하므로, NPM을 통해 사용할 수 있는 모든 패키지를 Yarn을 통해서도 사용할 수 있습니다.

#### d. 캐싱과 오프라인 모드

이미 설치한 패키지를 로컬 캐시에 저장하여, 같은 패키지를 다시 설치할 때 인터넷 연결 없이 설치할 수 있는 오프라인 모드를 지원합니다.

### (3) 단점

Yarn의 경우는 brew나 NPM을 통해 한번 더 설치를 해줘야하는 불편함이 있습니다.

<br/>

## 3. 결론

각자가 편하고 선호하는 것을 사용하면 좋지만, 만약 둘 다 사용해 보지 않았다면 널리 사용되는 NPM 부터 사용해 보고, 보안 쪽으로 더 신경써야 하거나 성능 면에서 비교를 원한다면 Yarn을 사용해 보면 어떨까 합니다.

### (1) 기능적 차이

초기에 Yarn은 NPM보다 몇몇 기능에서 우위를 가졌지만, 시간이 지나면서 발전을 거듭하며 단점을 많이 보완했기 때문에 현재 NPM/Yarn의 퍼포먼스와 안정성의 차이는 그리 크지 않다고 봐도 무방합니다. (약간 yarn이 우세하긴 하나..) 다만 Yarn의 병렬적 패키지 설치로 인한 가벼움, 또한 버전의 차이로 인한 버그 방지 등의 기능은 Yarn이 NPM보다 더 좋은 툴이라고 할만합니다.

### (2) 개인 또는 팀의 선호도

어떤 패키지 매니저를 사용할지는 개인이나 팀의 선호, 프로젝트의 필요성에 따라 결정됩니다. 다만, 같은 프로젝트 내에서 NPM과 Yarn을 혼용하는 것은 매우 좋지 않습니다. yarn.lock이나 package-lock.json 파일의 통일성 보장을 위해 하나의 프로젝트에서는 하나의 패키지 매니저를 사용해야 합니다.

### (3) 호환성

대부분의 현대 JavaScript 프로젝트는 NPM과 Yarn 양쪽 모두와 호환됩니다.
